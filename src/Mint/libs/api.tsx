import detectEthereumProvider from "@metamask/detect-provider";
import MetaMaskOnboarding from "@metamask/onboarding";
import hash from "keccak256";
import { MerkleTree } from "merkletreejs";
import Web3 from "web3";
import { toChecksumAddress } from "web3-utils";
import {
  requiredChainId,
  requiredChainIdName
} from "../libs/smart-contract";


const msg_mobile = "Please use MetaMask!";
const msg_desk = "Please intall MetaMask Wallet extension";
const deepLink = "https://metamask.app.link/dapp/spookiesclub.com/";

const msg_chain = `Please switch network to ${requiredChainIdName}!`;
export const _doThis = async (todo: any = null, prompt: any = true) => {
  const isMobile = require("is-mobile")();

  if (prompt && !MetaMaskOnboarding.isMetaMaskInstalled()) {
    if (isMobile) {
      if (window.confirm(msg_mobile)) window.location.href = deepLink;
    } else {
      if (window.confirm(msg_desk)) new MetaMaskOnboarding().startOnboarding();
    }
  }

  const ethereum: any = await detectEthereumProvider();

  if (ethereum && (prompt || (await ethereum.isConnected()))) {
    const [account] = await ethereum.request({
      method: "eth_requestAccounts",
    });
    const chainId = await ethereum.request({
      method: "eth_chainId",
    });
    // console.log({ chainId });

    console.log(chainId === requiredChainId);
    if (chainId === requiredChainId) todo && todo(account, new Web3(ethereum));
    else alert(msg_chain);
  }
};

export const getMerkleTree = () => {
  const elements = [
    "0xdC390D10EeCd5713B29a8204aCfbc5593C4Da17d",

"0x79B21cA0FFdD8d09950911e350302eFe9c7b754B",

"0x5Af6709DE34202F6e3c07E1Ce70328c1aacC420D",

"0xc34d49468Cb6C75b3f520B076c6676b1D122D7A8",

"0xf8dd97463FC0e5451E0ab4c83C0dc0582D922b95",

"0x445AaE029E6A8873C81c8dF82DDC8f5478D74E3e",

"0x88BF87a751365932D87f835fb9199f140dA1dA65",

"0x1B18236803B01Cdc850DD69768E380746c3D9938",

"0xEfd7c14AFC04450eD698D730759c7CC640CA3c5d",

"0xf4ac8B9106713Def391538a5C3d70a4513AA67C7",

"0xa80c95eDFA06eCdBa0E7EE25c38e08594e675cA6",

"0xB1b04F4E284f78AD773e8CEC8B6af0cDd8e81a7f",

"0x3f7DD07ca45F592b554d9201F3A32b13953f5458",

"0x7DF5225e49984cDf062bA4cc2296D38197d6B5DD",

"0xB87a1c7053eae7e18E599a6C0C0358764B5b05B5",

"0x10B98601C6F5a534c6a702b0e314Fa7A1D5C620E",

"0xb85FB77d7e9088D7bE9bFbF9Ab5988D779863fF1",

"0xf25dA52EA1aE2D32fD8a8E55F18b9b38F93DDBAA",

"0x42131D7A8d2b996b4e12528E981654AFB91aA0f9",

"0x06472baCd58f7763B1ee7cc50713d1d269795697",

"0x5ef51faC2C239980a6B10c6de67e499fb1155022",

"0xE58121c2AAAC116a23D3ca299a2B4d84677e2b19",

"0xF3a70D2E17E456840B49D13871612A595984C6Eb",

"0x0CaD9C270745Dd0CE3Ba743914A7B3192530EC23",

"0xf82714F9400e9126E789Def10E9ECcD6eedb394C",

"0xA8f7fc875b4b14F97720D5B407835Cfd9394211F",

"0xD6439E082CFD5647b270DDC108F32b081C677D12",

"0xeA4686797C184877fB9665555eCbf768adD72b2a",

"0x0AC94E8733b9d4b602A576A2701F2aeb2FA71CCc",

"0xCfa6D619125f156774B8aAAa980D784736e9E0fF",

"0xcdff102023F5054A1952235BFa5da53060c30EAA",

"0xa6775E91117c587081d1A23b1395E9F33DFa0ABf",

"0x1238e57b3B298d1d246b304a5Ae3835E11fC589F",

"0x642ca3f5b47d6894d4517ee62383cb6aabd23d50",

"0x2A75CFfD1F48D3d06eC6c4C374A34565B1F6444E",

"0x556545923009AA9A874799166511c2121fAe0f01",

"0x20eefef54f19e6eb450e4a01a92f068b41d8c6ce",

"0xDB0f4Ae5ae50EBa849eC951a956594C16673cB01",

"0xC06DD5E3C571E6A34B7EfF1C758ae495780cA134",

"0x6b45152d85456009CfA5F0DF58120Aa7c3b59F95",

"0x369f9B0e069903b2E72b13F08085257b6d216c95",

"0xd2da4ed3f035d3d1338dcea1dd841c630688f06d",

"0x9F924e084796Cbbdd03728a0884f3D3b2EA83052",

"0x30B8339C138aD46D48576B8fa16a3bF6574EE4A6",

"0x1238e57b3B298d1d246b304a5Ae3835E11fC589F",

"0x752B56a222ceCa92a33629ef0e0F27A17560480b",

"0x0873751B9A544619BA8177e460B3CB906466ddFa",

"0x5886C72EC3916e36EB1536c226FA961Cb67E9033",

"0x23e22ba25bba89c92d606759113f3faa636a65c8",

"0x5C22EFbf084ecC596ecdA27FD30068349dE50613",

"0xe0Ed41A6F52BD9d288b7bB1556c5cF3e6900d6B3",

"0xE198a288396FFDaFD9e7d004F95D67dB86864Ae4",

"0x555411301CF7B43EEbCFc684B4770c5DDdD85eA8",

"0x5C22EFbf084ecC596ecdA27FD30068349dE50613",

"0xFD028365e73fF5497F31F8C7Ab2EBF70B074f700",

"0x72A6Fd5753343989af395b4d8e355483D145263F",

"0xB384d7353aCb3f7A5CDBfA4B272Ae6c9Bb975278",

"0x45E9c0b054A17f9E9404862Eba068F386f573bc8",

"0x6b0679B27ED8f83ec953e8f3e56b72886ec7E0D8",

"0xD6c9e32bDeA2de09392Dd7BBE80e4BC4D94E82cd",

"0x959a6FA8b13ba63519412497502f833F38F33b25",

"0xB18C78981d20B9Ba52fc99010f6F8D80D8Bc1d79",

"0x5ef51faC2C239980a6B10c6de67e499fb1155022",

"0xd339277Cba67b9C576AA8a650DbF78DA4d77dD5A",

"0xf04647F2e50550143a096e50AD5257067F278161",

"0x10f2Be2B02Ec5D6Ddc38e56AD22F6c05900534F5",

"0x56d83e8354E6C55081448f63237A6120007b1E1d",

"0xf04647F2e50550143a096e50AD5257067F278161",

"0xa820a37632502b23DC0eA6f7ca0d99540A09A112",

"0xA8f7fc875b4b14F97720D5B407835Cfd9394211F",

"0x69416724D326C45FB1a18fe048CAe01F7D288128",

"0x7527AF5F79efC71d1e1Be6fD2b2362354390E5af",

"0x5F239F0706B25D5d46CD4c71a9B9818ac7C8CaFf",

"0x93e8168Be4f58681FfAba1B0E765487b34d2a4cE",

"0xb9773448D3973F125f41CF310dB10C2cDaFeA2ab",

"0x1C5866e31aE66cFA604a6408d43Ce48bd28cBB51",

"0xD812967a79345ff7A9375BA7b65cf5e400F41EEF",

"0x77D8936754d0bce2d0e0bcA9bca35FF841f16116",

"0x694782Ab5c56e2E1906D0F15dE01e6E14cce27a4",

"0xDba4E904924a26fDd66c7bAC59A8E54c763DA211",

"0x49D9388DABF2842e02A6AC9B11d50470fC10F184",

"0x3738D3aa526500320abab15ECE4886cd5f5BF375",

"0x28A5E47C4B70cC4bA148916C2cD28Bfc71616a13",

"0xC2B1b47863aCBb3dCf98d795890577640b58A1bd",

"0x7b50be5B7a93f1E6Ba2a76aC151c78AE01778920",

"0x9f96c04F0CcD14A23E48c052110ba7ab8219baf5",

"0xD7af638e025A4220f3b64027fbb1e668e2104f97",

"0xbcEc8454be6d70A8251b6691cA2BC38f4Bea94c4",

"0x1fAcbD22FE2d4968e82A6F20e724Db09529b1017",

"0xB18C78981d20B9Ba52fc99010f6F8D80D8Bc1d79",

"0x39B698CA592C73E6B322e1f47392b5a183ab5b29",

"0x7527AF5F79efC71d1e1Be6fD2b2362354390E5af",

"0x0d0409af21e4c148480cdbe8bb8ba9c6a25c2313",

"0xD6c9e32bDeA2de09392Dd7BBE80e4BC4D94E82cd",

"0x959a6FA8b13ba63519412497502f833F38F33b25",

"0x6b0679B27ED8f83ec953e8f3e56b72886ec7E0D8",

"0xaAAF4DB68058eD663196Fc1F9E3E9e4Aabd0Bfd8",

"0x1fAcbD22FE2d4968e82A6F20e724Db09529b1017",

"0x642ca3f5b47d6894d4517ee62383cb6aabd23d50",

"0x547F6Fa0714cfBF68651Ec818bbe532236fA1de2",

"0x2A230D06E62Ae71CeaA2542e869cfd68621681C6",

"0xe52be8e338ac09da2b6b53548e536701affd80ad",

"0x01C328A759AB68215c3Ed75D8da96D2b10713F83",

"0xb19B3D96D40b7396d1346b1eCD351687417Aa515",

"0xa63415e2Eb4Ba2C92C77b57CEa0F87a72d92b9cF",

"0x01C328A759AB68215c3Ed75D8da96D2b10713F83",

"0x77D8936754d0bce2d0e0bcA9bca35FF841f16116",

"0x39c2cb43ac3990170d7Dc751ADD207568b3f827D",

"0x1fAcbD22FE2d4968e82A6F20e724Db09529b1017",

"0x694782Ab5c56e2E1906D0F15dE01e6E14cce27a4",

"0xDba4E904924a26fDd66c7bAC59A8E54c763DA211",

"0xD99d17AaD842Ff8cF15F1B704FBfb4Ad22a3668A",

"0x55d84C2Db02AfE66D3417d73cEa17A1B3B2fb24b",

"0x7f7aE9f11Cf16a2AFBb2A92cFEdab4cb617d2F14",

"0x424Fc6694f840824D322C053c963e4caB19A2926",

"0x6Af21C6F242769Bbe1e4386F2D78Df820c970C2b",

"0x78f707f5499c3eada1475c9b9eaeb0fa66298190",

"0x0d0409af21e4c148480cdbe8bb8ba9c6a25c2313",

"0x0eC2e12036D8A02e007fDb8827ed092Fb9d9FA95",

"0x3138D5F43ABDD17e6Fef3dEF5dbab43ed705c694",

"0x0131406a69a031e373C082c7DeFA69b678bb4063",

"0x5A798F65D5d7ad9A5E077A45e05f58aF4aF400ff",

"0x1860A0921C9DF50F8e26c566529027E63cc37977",

"0xc23De50b0A3dF91452e4d0BF466D42188D0F5A2B",

"0x1C5866e31aE66cFA604a6408d43Ce48bd28cBB51",

"0x334dE035b936C428C05e2F4d8366B1b5d7f96206",

"0x20A42C50BF80505b6b4f5ea0E69e6Ff2360527CA",

"0xF1563449f8bF6dE4AD27B44711666EA2ECF52A59",

"0x009a0F8A8181031dd4283A035086F2dB5957B9F1",

"0x167a7f3Ceb1b257cae1Fc82a34985B6C66bB0546",

"0x8E34EEC8D62ec9C640B32d958ad465b32EE1eb05",

"0xE870e8A5c41329065C4d77b39594553fe70aA87a",

"0xBcA58A076E69525d460d187C482a798485a86626",

"0x7b50be5B7a93f1E6Ba2a76aC151c78AE01778920",

"0xbafE9f913ce8171a10B793ba1cdC743eE1f3F0D0",

"0x1b63c839cF56D61C1EC695dbfE764DB54A70a84e",

"0xaAAF4DB68058eD663196Fc1F9E3E9e4Aabd0Bfd8",

"0x147B29e6A3596d46A65A6AC6d66195b020F3715f",

"0xE06F5B2FADa98AfC245069A2a83faB707B14ECf8",

"0x35BE9f207E39Be6a55B8449B517cD1ffeC7DDa56",

"0x4c3E67531D075bb313914d5ad8120cC0Ed28413A",

"0x1aBAc8201EB5bd8885F497Ec5F0B131270DF4f3A",

"0x2A230D06E62Ae71CeaA2542e869cfd68621681C6",

"0xB1Ca1FCD9552d4257AA26b8524Ec5f98b200699b",

"0xd9170052822cf2DE8D967593a95F4687B3947E48",

"0x23e22ba25bba89c92d606759113f3faa636a65c8",
"0x267445Dba254c69EAfce11F26128E8e9bf8FaDfb",

"0x23e22ba25bba89c92d606759113f3faa636a65c8",

"0x3B2647D55E98E7C863BF3623c6777029506061e5",

"0x255A63C6861a63a5cb86AaB9d8BeBf73d87C2ADC",

"0x4F95Ee28f58f832969638E678a5aa00F4a9101F8",

"0x5d525F37428d1855D3dB57bc4Dc06E22a5f17dCA",

"0x1B315C42650F40DEe75e77bFA64AC3DF962b49Dd",

"0xe3d9B865FB2459364Fd0822784Dc66eD9dfcc723",

"0xD7af638e025A4220f3b64027fbb1e668e2104f97",

"0xd774021A533C3CbcEb75Ea04645CABF70A893483",

"0x042c6d482b7aCB11967265161444FaD421342823",

"0x5486dF679bdA575D1799066Ba26F18C0FA8DaA5a",

"0x23e22ba25bba89c92d606759113f3faa636a65c8",

"0xa8e8dda3cf1df7b98cde098fbe1ef69d7e967964",

"0x9a3DB916d2fc56ED82A76B9833EF0Dd5479538ea",

"0x11b72e83EbefDEc5228E318D912D80c7f06b7456",

"0xfe63c00e9c0520a643489b13f3f02d7c20dd2396",

"0xa7259487F8161a22F928404dD2946e6668BDC95A",

"0xA3128968bB208d5bE4A40acEbc03DE332d129183",

"0x1199E34C11e99D81Ca3F71adB7B93D242F0d3d93",

"0x00f1a1aC491db32fdA60D62eE1010496486F138F",

"0x7e71122bdca37E08fCDa2E2d6D2f0ae2d132B226",

"0x34998CC50053113ad56302c7a3D0FB21Bb1ba28D",

"0x61e39e400f7d46f4286DBe605Fe37a61eb8E5b07",

"0x8732c2334660b333c3706b7D6D21946c5D61a937",

"0x42e51a0D091deACcE13BbE880713018B2e41067f",

"0x19E7E376E7C213B7E7e7e46cc70A5dD086DAff2A",

"0xd91E50Ca37Df9c0a65863aF07E872a13700844e3",

"0xeed26Bafdbc322031a0f78902AaE09A265C39358",

"0x4762E60b6507bB2602773F4f7C8475C62fA1258a",

"0x9aD59C0e57E5933104c67093d7dCbB67B2CfA362",

"0xbBBE125fE6B1b264A1032ca93AB984DE53eA72Bb",

"0xAE9c483c153C75F49F336DD20BCDe504725D87Cd",

"0x05a375233dCB83435D6988e7685AA27C3cC21328",
  "0xA01575aa8B036A6A9F7cdB9a197a2AfaC7B31890",
  ].map((a) => toChecksumAddress(a));

  return new MerkleTree(elements, hash, {
    hashLeaves: true,
    sortPairs: true,
  });
};